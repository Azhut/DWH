# TODO

## Изменения архитектуры:
- [x] Исправить архитектурную ошибку при удалении файлов не удалялись flat_data
- [x] Добавить корректную настройку окрружения для разных режимов работы
- [x] Добавить систему тестов
- [ ] При загрузке файла, который уже был загружен не проставляется id. При использовании API files могут выдаваться ошибочно загруженные. Как будто в коллекции files не нужно хранить информацию об ошибке. Но при upload нужно возвращать warning о том, какие файлы не были загружены, так как были ошибки с указанием ошибки. На фронте добавить нормальный формат отображения ошибки и даты, когда это произошло
- [ ] В invalid_filter добавить статус 400 или 422 в ответ
- [ ] Автоудаление логов 
- [ ] Вывод логов на фронтенд
- [ ] Пофиксить докер файлы (добавить\удалить helthcheck)
- [ ] Сейчас при ошибке некорректно выкидывается, что файл уже был загружен

---

## Правки после новой архитектуры

- [x] Переехать на Aggregate-Centric Architecture
- [ ] Нужно пофиксить logs: понять почему есть сущность Logs, а в сore есть дубликаты логики 
- [ ] Проверить единообразие обращения к бд

промпт для курсора:
```
- Хочу внести финальные правки. Мне кажется @app/application/upload/data_save.py @app/application/file_delete.py  @app/application/retrieval.py  @app/data/index_manager.py  заслуживают стать отдельным агрегатом, так как они тесно связаны между собой, но разбросаны по проекту. Также встает вопрос, как происходит работа с @app/core/database.py, точно ли во всем проекте используеся один экземлпяр, или где-то обращение идет иным способом? как-то бы это пофиксить  Еще встает вопрос. Если есть @app/domain/log/models.py , то нужны ли @app/core/exceptions.py  и @app/core/logger.py . 
```

- [ ] В "Справочно" нужно обрабатывать и пустые значения. Сейчас они не сохраняются
- [ ] Подумать над тем, чтобы собирать плоские данные по индексам столбцов и строк, а не по значениям. Могут быть дубли
- [ ] Неправильно нахожу начало данных. Лист7 надо посмотреть почему неправильно анализируется